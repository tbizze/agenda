import{o as l,c as p,b as n,e as _,k,u as a,T as S,d as z,x as T,w as d,f,F as $,Z as U,g as b,t as c,i as h,a as e,j as A,l as E,h as B,O as g}from"./app-qWYcPTlk.js";import{_ as H,p as P}from"./AppLayout-bkEbNcv0.js";import{B as L,_ as q}from"./BizPageTitle-YKBcEzJD.js";import{_ as G,r as I,a as Z,P as J}from"./BizButtonCreate-_9fv1cjj.js";import{_ as j,a as K}from"./BizTheadOrder-nzxYBR8r.js";import{_ as Q}from"./BizButtonDelete-cH-D3pfW.js";import{_ as x}from"./BizListBox-6_B09RIX.js";import"./_plugin-vue_export-helper-x3n3nnut.js";function R(u,i){return l(),p("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[n("path",{d:"M9 2a2 2 0 00-2 2v8a2 2 0 002 2h6a2 2 0 002-2V6.414A2 2 0 0016.414 5L14 2.586A2 2 0 0012.586 2H9z"}),n("path",{d:"M3 8a2 2 0 012-2v10h8a2 2 0 01-2 2H5a2 2 0 01-2-2V8z"})])}const W={class:"btn btn-success btn-square rounded-md btn-xs"},X={__name:"BizButtonCopy",props:{label:{type:[String],default:""}},setup(u){return(i,s)=>(l(),_("button",W,[(l(),p(k(a(R)),{class:"h-4 w-4"}))]))}},Y={class:""},ee={class:"relative"},te={class:"absolute inset-y-0 left-0 flex items-center pl-2 pointer-events-none"},se={class:"btn rounded-md btn-sm"},oe={class:"table table-compact"},ae={class:"text-sm uppercase text-gray-700 bg-stone-200"},re=e("th",{class:"text-center w-10"},"#",-1),le=e("th",{class:"text-center"},"Dia",-1),ne=e("th",{class:"text-center"},"Hora",-1),ie=e("th",{class:""},"Grupo",-1),de=e("th",{class:""},"Local",-1),ce=e("th",{class:"text-center"},"Áreas",-1),ue=e("th",{class:"text-center"},"Ação",-1),pe={class:"border-b text-center w-10"},_e={class:"border-b"},me={class:"border-b text-center"},fe={class:"border-b text-center"},be={class:"border-b text-center"},he={class:"border-b"},ge={class:"border-b"},ve={class:"border-b text-center space-x-1"},xe={class:"border-b space-x-1 w-28 text-center"},ye=e("div",{class:""},null,-1),$e={class:"flex justify-center gap-5"},Me={__name:"EventoIndex",props:{titulo:"",dados:Object,filters:Object,grupos:Object,locais:Object,areas:Object,meses:Object},setup(u){const i=u,s=S({local_id:i.filters.local_id,grupo_id:i.filters.grupo_id,area_id:i.filters.area_id,dia_mes:i.filters.dia_mes,search:i.filters.search,field:i.filters.field,direction:i.filters.direction});function w(){g.get(route("eventos.index"),s)}function N(){g.get(route("eventos.create"))}function M(t){g.get(route("eventos.replicate",t))}function O(t){g.get(route("eventos.edit",t))}function F(t){g.delete(route("eventos.destroy",t)),v.value=!1}function C(t){s.field=t,s.direction=s.direction==="asc"?"desc":"asc",w()}const v=z(!1),y=z(0);function V(){v.value=!1}function D(t){v.value=!0,y.value=t}return T(()=>{if(i.filters.grupo_id){let t=s.grupo_id;t=t.map(Number),s.grupo_id=t,console.log(s.grupo_id)}if(i.filters.local_id){let t=s.local_id;t=t.map(Number),s.local_id=t,console.log(s.local_id)}if(i.filters.area_id){let t=s.area_id;t=t.map(Number),s.area_id=t,console.log(s.area_id)}}),(t,r)=>(l(),_($,null,[n(a(U),{title:t.$props.titulo},null,8,["title"]),n(H,{title:t.$props.titulo},{header:d(()=>[n(L,null,{default:d(()=>[b(c(t.$props.titulo),1)]),_:1}),t.$page.props.auth.user.permissions.includes("eventos.create")?(l(),p(G,{key:0,onClick:h(N,["prevent"]),label:"Cadastrar"})):f("",!0)]),default:d(()=>[n(q,null,{tabHeader:d(()=>[e("div",Y,[e("form",{onSubmit:r[5]||(r[5]=h(o=>w(),["prevent"])),class:"flex gap-2"},[e("div",ee,[e("div",te,[(l(),p(k(a(I)),{class:"h-5 w-5"}))]),A(e("input",{type:"search","onUpdate:modelValue":r[0]||(r[0]=o=>a(s).search=o),class:"py-1.5 text-sm rounded-md bg-gray-100 border-gray-300 hover:bg-gray-200 hover:border-gray-400 focus:border-blue-500 focus:ring-blue-500 pl-8",placeholder:"Procurar"},null,512),[[E,a(s).search]])]),n(x,{modelValue:a(s).grupo_id,"onUpdate:modelValue":r[1]||(r[1]=o=>a(s).grupo_id=o),options:u.grupos,class:"z-50 w-40",multiple:"",placeholder:"Filtrar grupo.."},null,8,["modelValue","options"]),n(x,{modelValue:a(s).local_id,"onUpdate:modelValue":r[2]||(r[2]=o=>a(s).local_id=o),options:u.locais,class:"z-50 w-40",multiple:"",placeholder:"Filtrar local.."},null,8,["modelValue","options"]),n(x,{modelValue:a(s).area_id,"onUpdate:modelValue":r[3]||(r[3]=o=>a(s).area_id=o),options:u.areas,class:"z-50 w-40",multiple:"",placeholder:"Filtrar área.."},null,8,["modelValue","options"]),n(x,{modelValue:a(s).dia_mes,"onUpdate:modelValue":r[4]||(r[4]=o=>a(s).dia_mes=o),options:u.meses,class:"z-50 w-40",placeholder:"Filtrar mês.."},null,8,["modelValue","options"]),e("button",se,[(l(),p(k(a(Z)),{class:"h-4 w-4"}))])],32)])]),tabBody:d(()=>[e("table",oe,[e("thead",ae,[e("tr",null,[re,e("th",{class:"hover:text-accent cursor-pointer",onClick:r[6]||(r[6]=o=>C("nome"))},[n(j,{field:a(s).field,coluna:"nome",direction:a(s).direction},{default:d(()=>[b(" Nome ")]),_:1},8,["field","direction"])]),le,e("th",{class:"text-center hover:text-accent cursor-pointer",onClick:r[7]||(r[7]=o=>C("start_date"))},[n(j,{field:a(s).field,coluna:"start_date",direction:a(s).direction},{default:d(()=>[b(" Data ")]),_:1},8,["field","direction"])]),ne,ie,de,ce,ue])]),e("tbody",null,[(l(!0),_($,null,B(u.dados.data,o=>(l(),_("tr",{key:o.id,class:"hover:bg-gray-100"},[e("td",pe,c(o.id),1),e("td",_e,c(o.nome),1),e("td",me,c(o.dia_semana),1),e("td",fe,c(o.start_date),1),e("td",be,c(o.start_time),1),e("td",he,c(o.to_grupo.nome),1),e("td",ge,c(o.to_local.nome),1),e("td",ve,[(l(!0),_($,null,B(o.areas,m=>(l(),_("span",{key:m.id,class:"badge badge-ghost"},c(m.nome),1))),128))]),e("td",xe,[t.$page.props.auth.user.permissions.includes("eventos.edit")?(l(),p(X,{key:0,onClick:h(m=>M(o.id),["prevent"])},null,8,["onClick"])):f("",!0),t.$page.props.auth.user.permissions.includes("eventos.edit")?(l(),p(K,{key:1,onClick:h(m=>O(o.id),["prevent"])},null,8,["onClick"])):f("",!0),t.$page.props.auth.user.permissions.includes("eventos.destroy")?(l(),p(Q,{key:2,onClick:h(m=>D(o.id),["prevent"])},null,8,["onClick"])):f("",!0)])]))),128))])])]),tabFooter:d(()=>[ye,n(J,{pagination:u.dados},null,8,["pagination"])]),_:1})]),_:1},8,["title"]),v.value?(l(),p(a(P),{key:0,size:"md",onClose:V},{header:d(()=>[b("Confirma exclusão!")]),body:d(()=>[b("Tem certeza que deseja excluir o registro nº '"+c(y.value)+"'? Esta ação não poderá ser desfeita.",1)]),footer:d(()=>[e("div",$e,[e("button",{onClick:r[8]||(r[8]=o=>F(y.value)),type:"button",class:"btn btn-sm btn-accent"}," Sim "),e("button",{onClick:V,type:"button",class:"btn btn-sm"}," Não ")])]),_:1})):f("",!0)],64))}};export{Me as default};
