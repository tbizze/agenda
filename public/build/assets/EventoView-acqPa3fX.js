import{T,d as p,x as M,o as i,e as m,b as n,u as l,w as d,c as f,f as C,F as g,Z as U,g as h,t as u,i as j,a as e,k as N,j as E,l as S,h as F,O as w}from"./app-qWYcPTlk.js";import{_ as L,p as H}from"./AppLayout-bkEbNcv0.js";import{B as q,_ as A}from"./BizPageTitle-YKBcEzJD.js";import{_ as G,r as Z,a as I,P as J}from"./BizButtonCreate-_9fv1cjj.js";import{_}from"./BizListBox-6_B09RIX.js";import"./_plugin-vue_export-helper-x3n3nnut.js";const K={class:""},Q={class:"relative"},R={class:"absolute inset-y-0 left-0 flex items-center pl-2 pointer-events-none"},W={class:"btn rounded-md btn-sm"},X={class:"table"},Y=e("thead",{class:"text-sm uppercase text-gray-700 bg-stone-200"},[e("tr",null,[e("th",{class:"p-2"},"Dia"),e("th",{class:"p-2"}),e("th",{class:"p-2"},"Hora"),e("th",{class:"p-2"},"Evento"),e("th",{class:"p-2"},"Grupo"),e("th",{class:"p-2"},"Local"),e("th",{class:"p-2"},"Áreas")])],-1),ee={class:"border-b w-7 p-2"},se={class:"border-b w-7 p-2"},te={class:"border-b w-7 p-2 border-r"},ae={class:"border-b p-2 border-r"},oe={class:"border-b p-2 border-r"},le={class:"border-b p-2 border-r"},re={class:"border-b p-2 space-x-1"},ie=e("div",{class:""},null,-1),ne={class:"flex justify-center gap-5"},_e={__name:"EventoView",props:{titulo:"",dados:Object,filters:Object,grupos:Object,locais:Object,areas:Object,meses:Object},setup(c){const r=c,s=T({local_id:r.filters.local_id,grupo_id:r.filters.grupo_id,area_id:r.filters.area_id,dia_mes:r.filters.dia_mes,search:r.filters.search,field:r.filters.field,direction:r.filters.direction});function O(){w.get(route("eventos.view"),s)}function z(){w.get(route("eventos.create"))}const k=p("pdf/1");function B(){s.dia_mes?k.value="pdf/"+s.dia_mes:k.value="pdf/1"}const b=p(null),y=p(null);function D(){if(s.dia_mes&&(b.value=s.dia_mes),s.area_id&&(y.value=s.area_id),!s.dia_mes)window.open("pdf/","_blank");else if(s.dia_mes&&!s.area_id){const t="pdf/"+b.value;window.open(t,"_blank")}else if(s.dia_mes&&s.area_id){const t="pdf/"+b.value+"/"+y.value;window.open(t,"_blank")}}function P(t){w.delete(route("eventos.destroy",t)),v.value=!1}const v=p(!1),V=p(0);function $(){v.value=!1}return M(()=>{if(r.filters.grupo_id){let t=s.grupo_id;t=t.map(Number),s.grupo_id=t}if(r.filters.local_id){let t=s.local_id;t=t.map(Number),s.local_id=t}if(r.filters.area_id){let t=s.area_id;t=t.map(Number),s.area_id=t}}),(t,o)=>(i(),m(g,null,[n(l(U),{title:t.$props.titulo},null,8,["title"]),n(L,{title:t.$props.titulo},{header:d(()=>[n(q,null,{default:d(()=>[h(u(t.$props.titulo),1)]),_:1}),t.$page.props.auth.user.permissions.includes("eventos.create")?(i(),f(G,{key:0,onClick:j(z,["prevent"]),label:"Cadastrar"})):C("",!0)]),default:d(()=>[n(A,null,{tabHeader:d(()=>[e("div",K,[e("form",{onSubmit:o[7]||(o[7]=j(a=>O(),["prevent"])),class:"flex gap-2"},[e("div",Q,[e("div",R,[(i(),f(N(l(Z)),{class:"h-5 w-5"}))]),E(e("input",{type:"search","onUpdate:modelValue":o[0]||(o[0]=a=>l(s).search=a),class:"py-1.5 text-sm rounded-md bg-gray-100 border-gray-300 hover:bg-gray-200 hover:border-gray-400 focus:border-blue-500 focus:ring-blue-500 pl-8",placeholder:"Procurar"},null,512),[[S,l(s).search]])]),n(_,{modelValue:l(s).grupo_id,"onUpdate:modelValue":o[1]||(o[1]=a=>l(s).grupo_id=a),options:c.grupos,class:"z-50 w-40",multiple:"",placeholder:"Filtrar grupo.."},null,8,["modelValue","options"]),n(_,{modelValue:l(s).local_id,"onUpdate:modelValue":o[2]||(o[2]=a=>l(s).local_id=a),options:c.locais,class:"z-50 w-40",multiple:"",placeholder:"Filtrar local.."},null,8,["modelValue","options"]),n(_,{modelValue:l(s).area_id,"onUpdate:modelValue":o[3]||(o[3]=a=>l(s).area_id=a),options:c.areas,class:"z-50 w-40",multiple:"",placeholder:"Filtrar área.."},null,8,["modelValue","options"]),n(_,{modelValue:l(s).dia_mes,"onUpdate:modelValue":o[4]||(o[4]=a=>l(s).dia_mes=a),options:c.meses,class:"z-50 w-40",placeholder:"Filtrar mês..",onClick:o[5]||(o[5]=a=>B())},null,8,["modelValue","options"]),e("button",W,[(i(),f(N(l(I)),{class:"h-4 w-4"}))]),e("a",{class:"btn rounded-md btn-sm",href:"javascript:void(0)",onClick:o[6]||(o[6]=a=>D())},"PDF")],32)])]),tabBody:d(()=>[e("table",X,[Y,e("tbody",null,[(i(!0),m(g,null,F(c.dados.data,a=>(i(),m("tr",{key:a.id,class:"hover:bg-gray-100"},[e("td",ee,u(a.numero_dia),1),e("td",se,u(a.dia_semana),1),e("td",te,u(a.start_time),1),e("td",ae,u(a.nome),1),e("td",oe,u(a.to_grupo.nome),1),e("td",le,u(a.to_local.nome),1),e("td",re,[(i(!0),m(g,null,F(a.areas,x=>(i(),m("span",{key:x.id,class:"badge badge-ghost"},u(x.nome),1))),128))])]))),128))])])]),tabFooter:d(()=>[ie,n(J,{pagination:c.dados},null,8,["pagination"])]),_:1})]),_:1},8,["title"]),v.value?(i(),f(l(H),{key:0,size:"md",onClose:$},{header:d(()=>[h("Confirma exclusão!")]),body:d(()=>[h("Tem certeza que deseja excluir o registro nº '"+u(V.value)+"'? Esta ação não poderá ser desfeita.",1)]),footer:d(()=>[e("div",ne,[e("button",{onClick:o[8]||(o[8]=a=>P(V.value)),type:"button",class:"btn btn-sm btn-accent"}," Sim "),e("button",{onClick:$,type:"button",class:"btn btn-sm"}," Não ")])]),_:1})):C("",!0)],64))}};export{_e as default};
